# airflow-values.yaml
# Pin to Airflow 2.10.5
airflowVersion: "2.10.5"
defaultAirflowTag: "2.10.5"

executor: "KubernetesExecutor"

postgresql:
  enabled: false

# Configure external PostgreSQL connection
data:
  metadataConnection:
    user: airflow
    pass: airflow123
    protocol: postgresql
    host: postgres-external
    port: 5432
    db: airflow
    sslmode: disable

# For dag-factory support
extraPipPackages:
  - "dag-factory==0.18.1"

dags:
  persistence:
    enabled: true
    size: 5Gi

# Logs persistence using hostPath (single-node K3s)
logs:
  persistence:
    enabled: true
    existingClaim: airflow-logs

webserver:
  replicas: 1
  defaultUser:
    enabled: true
    username: admin
    email: admin@example.com
    firstName: Admin
    lastName: User
    password: admin

config:
  core:
    load_examples: 'false'
  webserver:
    expose_config: 'true'
