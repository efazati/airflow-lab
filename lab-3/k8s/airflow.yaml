# Community Airflow Helm Chart Configuration
# Chart: airflow-helm/charts (version 8.9.0)
# Airflow: 2.10.4 (latest supported by community chart)

# Airflow version
airflow:
  image:
    repository: apache/airflow
    tag: 2.10.4-python3.11

  # Executor type
  executor: KubernetesExecutor

  # Install additional Python packages (including dag-factory)
  extraPipPackages:
    - "dag-factory==1.0.1"
    - "apache-airflow-providers-cncf-kubernetes"

  # Airflow configuration
  config:
    AIRFLOW__CORE__LOAD_EXAMPLES: "False"
    AIRFLOW__WEBSERVER__EXPOSE_CONFIG: "True"
    AIRFLOW__CORE__DAGS_ARE_PAUSED_AT_CREATION: "False"  # Auto-unpause new DAGs

# External PostgreSQL connection
externalDatabase:
  type: postgres
  host: postgres-external
  port: 5432
  database: airflow
  user: airflow
  password: airflow123

postgresql:
  enabled: false

# DAGs configuration
dags:
  persistence:
    enabled: false
  gitSync:
    enabled: false

# Logs configuration
logs:
  persistence:
    enabled: true
    existingClaim: airflow-logs

# Web server configuration
web:
  replicas: 1
  service:
    type: ClusterIP

# Scheduler configuration
scheduler:
  replicas: 1
  logCleanup:
    enabled: false

# Workers (not needed for KubernetesExecutor, but keeping minimal config)
workers:
  enabled: false

# Flower (not needed for KubernetesExecutor)
flower:
  enabled: false

# Redis (not needed for KubernetesExecutor)
redis:
  enabled: false

# Default user
users:
  - username: admin
    password: admin
    role: Admin
    email: admin@example.com
    firstName: Admin
    lastName: User
